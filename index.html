<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rithwik — Terminal Portfolio</title>
  <meta name="description" content="AMOLED terminal-inspired portfolio — hybrid UI (terminal + panels). Commands: help, about, projects, resume, tools, contact, exit, clear." />
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- BOOT / STARTUP SCREEN (typing) -->
  <div id="boot" class="boot">
    <pre id="bootText" class="bootText" aria-hidden="true"></pre>
  </div>

  <!-- Overlay used for final shutdown black screen -->
  <div id="shutdownOverlay" class="shutdown-overlay" aria-hidden="true"></div>

  <!-- Side menu + overlay -->
  <div id="menuOverlay" class="menu-overlay" tabindex="-1" aria-hidden="true"></div>
  <aside id="sideMenu" class="side-menu" aria-hidden="true">
    <button id="closeMenu" class="close-btn" aria-label="Close menu">✕</button>
    <h3>More about me</h3>
    <p><strong>Rithwik V Kumar</strong></p>
    <p>Electronics Engineer — Embedded & IoT systems. Student at DSATM.</p>
    <h4>Quick facts</h4>
    <ul>
      <li>Arch Linux user — distro jumper</li>
      <li>PC & car tinkering — petrolhead</li>
      <li>Boards: ESP32, STM32; tools: KiCad, PlatformIO</li>
    </ul>
  </aside>

  <!-- APP -->
  <div id="app" class="app hidden" role="application" aria-live="polite">
    <div class="layout">
      <!-- LEFT: Terminal Sidebar -->
      <aside class="sidebar" aria-label="Terminal">
        <div class="topbar">
          <div class="dots" aria-hidden="true"><span class="dot d1"></span><span class="dot d2"></span><span class="dot d3"></span></div>
          <div class="brand">
            <div class="mono">rithwik@portfolio</div>
            <div class="muted small">terminal — amoled · hybrid UI</div>
          </div>
        </div>

        <div id="terminal" class="terminal" tabindex="0" aria-live="polite">
          <div class="welcome muted">Welcome — type <span class="cmd inline">help</span> to see commands.</div>
          <div id="output" class="output" aria-hidden="false"></div>
        </div>

        <form id="promptForm" class="promptForm" role="search" aria-label="Command input">
          <div class="promptBar">
            <div class="promptIcon">➜</div>
            <input id="cmdInput" class="cmdInput" autocomplete="off" spellcheck="false" aria-label="Type a command" />
            <button id="runBtn" class="btn" aria-label="Run">Run</button>
          </div>
        </form>

        <div class="chips" aria-hidden="false">
          <button class="chip" data-cmd="help">help</button>
          <button class="chip" data-cmd="about">about</button>
          <button class="chip" data-cmd="projects">projects</button>
          <button class="chip" data-cmd="resume">resume</button>
          <button class="chip" data-cmd="tools">tools</button>
          <button class="chip" data-cmd="contact">contact</button>
          <button class="chip" data-cmd="clear">clear</button>
          <button class="chip" id="openMenuCmd" data-cmd="menu">menu</button>
        </div>
      </aside>

      <!-- RIGHT: Content -->
      <main class="content" id="content" tabindex="0">
        <!-- HERO -->
        <section id="panel-hero" class="card hero active" data-panel="hero" tabindex="0">
          <div class="left">
            <div class="avatar">RV</div>
            <div class="center">
              <h1>Rithwik V Kumar</h1>
              <p class="muted">Electronics Engineer • Toolmaker • Open-source tinkerer</p>
              <div class="meta">
                <span class="tag">Arch Linux</span>
                <span class="tag">IoT / Embedded</span>
                <span class="tag">DSATM</span>
              </div>
            </div>
          </div>
          <div class="right">
            <button id="menuBtn" class="btn ghost" aria-label="Open menu">☰</button>
          </div>
        </section>

        <!-- PANEL AREA -->
        <section id="panel-area" class="card panel-area" tabindex="0">
          <div class="panel" id="about" data-panel="about" hidden>
            <h2>About</h2>
            <p>Hi — I'm Rithwik, an Electronics Engineer focused on embedded systems, low-power IoT devices, and clean UX for hardware tools.</p>
            <h3>Hobbies</h3>
            <p class="muted">Jumping distros · Petrolhead · Tinkering with electronics</p>
            <h3>Education</h3>
            <p>Studying at <strong>Dayananda Sagar Academy of Technology and Management (DSATM)</strong>.</p>
          </div>

          <div class="panel" id="projects" data-panel="projects" hidden>
            <h2>Projects</h2>
            <article class="project">
              <h3>Soil Health Sensor <span class="status muted">(In Progress)</span></h3>
              <p>An IoT-based soil monitoring system using ESP32, VH400 probes and LoRa for remote data collection and analysis.</p>
              <div class="tags"><span class="tag">ESP32</span><span class="tag">LoRa</span><span class="tag">IoT</span></div>
            </article>
          </div>

          <div class="panel" id="resume" data-panel="resume" hidden>
            <h2>Resume</h2>
            <ul>
              <li>Embedded firmware & hardware prototyping</li>
              <li>Open-source contributor</li>
              <li>Comfortable with Linux workflows and PlatformIO</li>
            </ul>
          </div>

          <div class="panel" id="tools" data-panel="tools" hidden>
            <h2>Tools & Tech</h2>
            <div class="techGrid">
              <div class="tech">ESP32</div><div class="tech">STM32</div><div class="tech">LoRa</div>
              <div class="tech">KiCad</div><div class="tech">PlatformIO</div><div class="tech">Git</div>
            </div>
          </div>

          <div class="panel" id="contact" data-panel="contact" hidden>
            <h2>Contact</h2>
            <p class="muted">Mail</p>
            <p><a class="link" href="mailto:rithprakum@gmail.com">rithprakum@gmail.com</a></p>
            <p class="muted">Socials</p>
            <p>
              <a class="link" href="https://github.com/Ritikreal" target="_blank">GitHub</a> ·
              <a class="link" href="https://www.linkedin.com/in/rithwik-v-kumar-74aba4334" target="_blank">LinkedIn</a> ·
              <a class="link" href="https://open.spotify.com/user/r3gqfowv3mch550g1kyzln2ii" target="_blank">Spotify</a>
            </p>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Inline script (startup typing, terminal logic, side menu, exit) -->
  <script>
  (function () {
    /* ----- Elements ----- */
    const boot = document.getElementById('boot');
    const bootText = document.getElementById('bootText');
    const app = document.getElementById('app');
    const cmdInput = document.getElementById('cmdInput');
    const output = document.getElementById('output');
    const promptForm = document.getElementById('promptForm');
    const chips = Array.from(document.querySelectorAll('.chip'));
    const panels = Array.from(document.querySelectorAll('.panel'));
    const hero = document.getElementById('panel-hero');
    const menuBtn = document.getElementById('menuBtn');
    const sideMenu = document.getElementById('sideMenu');
    const menuOverlay = document.getElementById('menuOverlay');
    const closeMenu = document.getElementById('closeMenu');
    const openMenuCmd = document.getElementById('openMenuCmd');
    const shutdownOverlay = document.getElementById('shutdownOverlay');

    /* ----- Startup typing (classic) ----- */
    const startupLines = [
      "Initializing RithwikOS...",
      "Loading core modules...",
      "Detecting hardware: ESP32, LoRa...",
      "Mounting UI...",
      "",
      "WELCOME — RITHWIK"
    ];
    const asciiTitle = [
"  _____ _ _   _ _ _ _ _ _ ",
" |  __ (_) | | (_) | (_) |",
" | |__) || | | |_| | |_  |",
" |  _  / | | | | | | | | |",
" | | \\ \\ | |_| | | | | | |",
" |_|  \\_\\_\\___/|_|_|_|_|_|"
    ];

    function typeLines(lines, el, speed = 18) {
      return new Promise(resolve => {
        let lineIdx = 0, charIdx = 0;
        function tick() {
          if (lineIdx >= lines.length) return resolve();
          const line = lines[lineIdx];
          el.textContent = lines.slice(0, lineIdx).concat(line.slice(0, charIdx)).join('\n');
          charIdx++;
          if (charIdx > line.length) { lineIdx++; charIdx = 0; }
          setTimeout(tick, speed);
        }
        tick();
      });
    }

    function typeAscii(lines, el, speed = 28) {
      return new Promise(resolve => {
        let i = 0;
        function tick() {
          el.textContent = lines.slice(0, i).join('\n');
          i++;
          if (i > lines.length) resolve();
          else setTimeout(tick, speed);
        }
        tick();
      });
    }

    async function runStartup() {
      bootText.textContent = "";
      await typeLines(startupLines, bootText, 22);
      // small pause
      await new Promise(r => setTimeout(r, 350));
      // ascii title
      bootText.textContent = "";
      await typeAscii(asciiTitle, bootText, 200);
      await new Promise(r => setTimeout(r, 700));
      // fade out
      boot.classList.add('boot-exit');
      await new Promise(r => setTimeout(r, 800));
      boot.remove();
      app.classList.remove('hidden');
      cmdInput.focus();
    }

    /* run startup when DOM ready */
    window.addEventListener('load', runStartup);

    /* ----- Terminal logic (commands + history) ----- */
    const history = [];
    let historyIndex = -1;

    function pushHistory(cmd) {
      if (!cmd) return;
      if (history[history.length - 1] !== cmd) history.push(cmd);
      historyIndex = history.length;
    }
    function recallHistory(up) {
      if (history.length === 0) return;
      historyIndex = up ? Math.max(0, historyIndex - 1) : Math.min(history.length, historyIndex + 1);
      cmdInput.value = history[historyIndex] || '';
    }

    function appendLine(html, cls = '') {
      const p = document.createElement('div');
      if (cls) p.className = cls;
      p.innerHTML = html;
      output.appendChild(p);
      output.scrollTop = output.scrollHeight;
      return p;
    }

    function showPanel(id) {
      panels.forEach(p => p.hidden = true);
      hero.classList.remove('active');
      if (!id || id === 'hero') {
        hero.classList.add('active');
        hero.scrollIntoView({behavior:'smooth'});
        return;
      }
      const t = document.getElementById(id);
      if (!t) { appendLine(`<span class="muted">Panel not found: ${id}</span>`); return; }
      t.hidden = false;
      t.scrollIntoView({behavior:'smooth', block:'start'});
      setTimeout(()=> t.focus && t.focus(), 200);
    }

    /* commands */
    const commands = {
      help: () => appendLine('Available: help, about, projects, resume, tools, contact, menu, clear, exit', 'muted'),
      about: () => { showPanel('about'); appendLine('Opening about...', 'muted'); },
      projects: () => { showPanel('projects'); appendLine('Opening projects...', 'muted'); },
      resume: () => { showPanel('resume'); appendLine('Opening resume...', 'muted'); },
      tools: () => { showPanel('tools'); appendLine('Opening tools...', 'muted'); },
      contact: () => { showPanel('contact'); appendLine('Opening contact...', 'muted'); },
      menu: () => toggleMenu(),
      clear: () => { output.innerHTML = ''; appendLine('Cleared.', 'muted'); },
      exit: () => shutdownSequence()
    };

    async function handleCommand(raw) {
      const v = (raw||'').trim();
      if (!v) return;
      appendLine(`<span class="cmd inline">➜</span> <span class="mono">${escapeHtml(v)}</span>`);
      pushHistory(v);
      const parts = v.split(/\s+/);
      const cmd = parts[0].toLowerCase();
      const arg = parts.slice(1).join(' ');
      if (commands[cmd]) {
        try { await commands[cmd](arg); }
        catch (e) { appendLine('<span class="muted">Error running command</span>'); }
      } else {
        appendLine(`<span class="muted">Command not found: ${cmd} — type help.</span>`);
      }
    }

    promptForm.addEventListener('submit', e => {
      e.preventDefault();
      handleCommand(cmdInput.value);
      cmdInput.value = '';
      cmdInput.focus();
    });

    // arrow history
    cmdInput.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') { e.preventDefault(); recallHistory(true); }
      else if (e.key === 'ArrowDown') { e.preventDefault(); recallHistory(false); }
    });

    // chips/buttons
    chips.forEach(c => c.addEventListener('click', async () => {
      const cmd = c.dataset.cmd;
      if (!cmd) return;
      cmdInput.value = cmd;
      await handleCommand(cmd);
      cmdInput.value = '';
    }));

    // escape to blur
    window.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') { e.preventDefault(); cmdInput.focus(); }
    });

    function escapeHtml(s){ return String(s).replace(/[&<>"']/g,c=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

    /* ----- Side menu (blur + overlay) ----- */
    function openMenu() {
      sideMenu.classList.add('active');
      menuOverlay.classList.add('active');
      sideMenu.setAttribute('aria-hidden','false');
      menuOverlay.setAttribute('aria-hidden','false');
      document.body.classList.add('blur-bg');
    }
    function closeMenuFn() {
      sideMenu.classList.remove('active');
      menuOverlay.classList.remove('active');
      sideMenu.setAttribute('aria-hidden','true');
      menuOverlay.setAttribute('aria-hidden','true');
      document.body.classList.remove('blur-bg');
    }
    menuBtn.addEventListener('click', openMenu);
    if (closeMenu) closeMenu.addEventListener('click', closeMenuFn);
    if (menuOverlay) menuOverlay.addEventListener('click', closeMenuFn);
    if (openMenuCmd) openMenuCmd.addEventListener('click', openMenu);

    /* ----- Shutdown (exit) sequence: 5s countdown -> fade to black and stay off ----- */
    function shutdownSequence() {
      // prevent multiple shutdowns
      if (shutdownOverlay.classList.contains('active')) return;
      appendLine('<span class="muted">Initiating shutdown sequence...</span>');
      let t = 5;
      const countdown = setInterval(() => {
        appendLine(`<span class="muted">Shutting down in ${t}...</span>`);
        t--;
        if (t < 0) {
          clearInterval(countdown);
          // fade out to black
          shutdownOverlay.classList.add('active'); // will fade in via CSS
          // hide app interactivity
          app.classList.add('inactive');
          // keep black screen (do not reload)
        }
      }, 1000);
    }

    /* helper to focus input when clicking in terminal area */
    document.getElementById('terminal').addEventListener('click', ()=> cmdInput.focus());

    /* expose to console for debugging if needed */
    window._rp = { showPanel, appendLine };

  })();
  </script>

</body>
</html>
